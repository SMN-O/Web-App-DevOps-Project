# azure-pipelines.yml

trigger:
- main

pool:
  vmImage: 'ubuntu-latest'
  parrallel: 1


steps:
  - task: Docker@2
    inputs:
      containerRegistry: 'DevOpsProject'
      command: 'buildAndPush'
      repository: 'smnostuff/devopsimage'
      Dockerfile: '**/dockerfile'
  - task: KubernetesManifest@1
    inputs:
      action: 'deploy'
      connectionType: 'AzureResourceManager'
      azureResourceGroup: 'DevOps'
      kubernetesServiceConnection: 'DevOpsKub'
      namespace: 'DevOpsKubernetes'
      manifests: 'application-manifest.yaml'
